<!DOCTYPE HTML>

<head>
  <title>è´­ç‰©è½¦</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
  <link href="css/cart.css" rel="stylesheet" type="text/css" media="all" />
  <script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
  <script type="text/javascript" src="js/move-top.js"></script>
  <script type="text/javascript" src="js/easing.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
  <script type="text/javascript" src="js/userAuth.js"></script>
  <script src="js/cart-functions.js"></script>

  <style>
    .cart-title {
      margin: 20px 0;
      padding-bottom: 15px;
      border-bottom: 2px solid #4CAF50;
    }

    .cart-title h1 {
      color: #333;
      font-size: 24px;
      font-weight: bold;
      position: relative;
      display: inline-block;
    }

    .cart-title h1:after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 0;
      width: 100%;
      height: 2px;
      background: #4CAF50;
    }

    .cart-container {
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .cart-item {
      display: flex;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #eee;
      margin-bottom: 10px;
    }

    .cart-item img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin-right: 20px;
      border-radius: 4px;
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item h3 {
      margin: 0 0 10px;
      color: #333;
    }

    .quantity-controls {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }

    .quantity-controls button {
      padding: 5px 12px;
      border: 1px solid #ddd;
      background: #fff;
      cursor: pointer;
      border-radius: 4px;
    }

    .quantity-controls span {
      margin: 0 15px;
      min-width: 20px;
      text-align: center;
    }

    .cart-total {
      margin-top: 20px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
      text-align: right;
      font-size: 18px;
    }

    .remove-item {
      padding: 8px 15px;
      background: #ff4444;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }

    .remove-item:hover {
      background: #ff0000;
    }

    .empty-cart {
      text-align: center;
      padding: 50px;
      color: #666;
      font-size: 16px;
      background: #f9f9f9;
      border-radius: 8px;
      margin: 20px 0;
    }

    .checkout-button {
      display: block;
      width: 200px;
      margin: 20px 0 0 auto;
      padding: 12px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }

    .checkout-button:hover {
      background: #45a049;
    }

    /* è´­ç‰©è½¦é“¾æ¥æ ·å¼ */
    .cart-link {
      float: right;
      margin: 10px 15px;
    }

    .cart-link a {
      display: flex;
      align-items: center;
      color: #666;
      font-size: 16px;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .cart-link a:before {
      content: 'ğŸ›’';
      margin-right: 5px;
      font-size: 18px;
    }

    .cart-link a:hover {
      color: #4CAF50;
    }

    .cart-item-content {
      display: flex;
      align-items: center;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .cart-item-info {
      margin-left: 20px;
      flex: 1;
    }

    /* ç”¨æˆ·çŠ¶æ€åŒºåŸŸæ ·å¼ */
    .header_top_right {
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }

    .user-status {
      margin-right: 20px;
      display: flex;
      align-items: center;
    }

    .welcome-text {
      color: #666;
      margin-right: 5px;
    }

    #username-display {
      color: #4CAF50;
      font-weight: bold;
      margin-right: 10px;
    }

    .auth-link {
      color: #666;
      text-decoration: none;
      margin: 0 10px;
      transition: color 0.3s;
    }

    .auth-link:hover {
      color: #4CAF50;
    }

    .logout-link {
      color: #ff4444;
      text-decoration: none;
      margin-left: 10px;
      transition: color 0.3s;
    }

    .logout-link:hover {
      color: #ff0000;
    }
  </style>
</head>

<body>
  <div class="header">
    <div class="wrap">
      <div class="header_top">
        <div class="logo">
          <a href="index.html"><img src="images/logo.png" alt="" /></a>
        </div>
        <div class="header_top_right">
          <div class="search_box">
            <!-- æœç´¢æ¡† -->
            <div class="search-area">
              <form action="search-results.html" method="get" id="searchForm">
                <input type="text" name="q" id="searchInput" placeholder="è¾“å…¥å…³é”®è¯">
                <input type="submit" value="æœç´¢">
              </form>
            </div>
          </div>
          <!-- ç”¨æˆ·çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ -->
          <div class="user-status">
            <!-- æœªç™»å½•çŠ¶æ€ -->
            <div id="guest-links" style="display: block;">
              <a href="login.html" class="auth-link">ç™»å½•</a>
              <a href="register.html" class="auth-link">æ³¨å†Œ</a>
            </div>
            <!-- å·²ç™»å½•çŠ¶æ€ -->
            <div id="user-info" style="display: none;">
              <span class="welcome-text">æ¬¢è¿ï¼Œ</span>
              <span id="username-display"></span>
              <a href="javascript:void(0)" onclick="handleLogout()" class="logout-link">é€€å‡º</a>
            </div>
          </div>
        </div>
        <div class="clear"></div>
      </div>

      <!-- å¯¼èˆªèœå• -->
      <div class="navigation">
        <a class="toggleMenu" href="#">èœå•</a>
        <ul class="nav">
          <li>
            <a href="index.html">é¦–é¡µ</a>
          </li>
          <li class="test">
            <a href="#">å¨æˆ¿ç”¨å“</a>
            <ul>
              <li>
                <a href="#">å¨å…·</a>
                <ul>
                  <li><a href="product/guojv.html">é”…å…·</a></li>
                  <li><a href="product/yaliguo.html">å‹åŠ›é”…</a></li>
                </ul>
              </li>
              <li>
                <a href="#">å‚¨ç‰©</a>
                <ul>
                  <li><a href="product/pingbei.html">æ°´ç“¶å’Œæ°´æ¯</a></li>
                  <li><a href="product/guanzi.html">å®¹å™¨å’Œç½å­</a></li>
                </ul>
              </li>
              <li>
                <a href="#">é¤å…·å’Œé¤æ¡Œç”¨å“</a>
                <ul>
                  <li><a href="product/canjv.html">é¤å…·</a></li>
                  <li><a href="product/tiaowei.html">è°ƒå‘³æ–™å¥—è£…</a></li>
                </ul>
              </li>
              <li>
                <a href="#">é…’å§ç”¨å“</a>
                <ul>
                  <li><a href="product/kaipingqi.html">å¼€ç“¶å™¨</a></li>
                  <li><a href="product/jiuchu.html">é…’å£¶</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#">ç”µè„‘</a>
            <ul>
              <li>
                <a href="#">ç¬”è®°æœ¬ç”µè„‘</a>
                <ul>
                  <li><a href="product/huipei.html">æƒ æ™®</a></li>
                  <li><a href="product/lianxiang.html">è”æƒ³</a></li>
                  <li><a href="product/del.html">æˆ´å°”</a></li>
                </ul>
              </li>
              <li>
                <a href="#">ç”µè„‘é…ä»¶</a>
                <ul>
                  <li><a href="yingpan.html">å¤–ç½®ç¡¬ç›˜</a></li>
                  <li><a href="upan.html">Uç›˜</a></li>
                  <li><a href="zujian.html">ç”µè„‘ç»„ä»¶</a></li>
                  <li><a href="waishe.html">ç”µè„‘å¤–è®¾</a></li>
                  <li><a href="luyou.html">æ•°æ®å¡å’Œè·¯ç”±å™¨</a></li>
                  <li><a href="shubiao.html">é¼ æ ‡</a></li>
                  <li><a href="tiezhi.html">ç¬”è®°æœ¬è´´çº¸</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#">å¥åº·ä¸ç¾å®¹</a>
            <ul>
              <li><a href="#">æ²æµ´ä¸æŠ¤è‚¤</a>
                <ul>
                  <li><a href="muyu.html">æ²æµ´éœ²</a></li>
                  <li><a href="xifashui.html">æ´—å‘æ°´</a></li>
                  <li><a href="hufashui.html">æŠ¤å‘ç´ </a></li>
                </ul>
              </li>
              <li><a href="jianyang.html">å¥åº·ä¸å®‰å…¨</a></li>
            </ul>
          </li>
          <li>
            <a href="#">å®¶å±…å›­è‰º</a>
            <ul>
              <li>
                <a href="#">å®¶å…·</a>
                <ul>
                  <li><a href="chuangpin.html">åºŠå“</a></li>
                  <li><a href="yushi.html">æµ´å®¤</a></li>
                  <li><a href="chufang.html">å¨æˆ¿</a></li>
                  <li><a href="keting.html">å®¢å…</a></li>
                </ul>
              </li>
              <li>
                <a href="#">å®¶å±…è£…é¥°</a>
                <ul>
                  <li><a href="huahui.html">èŠ±å‰æ¤ç‰©</a></li>
                  <li><a href="xiangxun.html">å®¶ç”¨é¦™è–°</a></li>
                  <li><a href="zongjiao.html">å®—æ•™è£…é¥°</a></li>
                  <li><a href="qiangmian.html">å¢™é¢è£…é¥°</a></li>
                </ul>
              </li>
              <li>
                <a href="yuanyi.html">å›­è‰ºå·¥å…·</a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#">åŠå…¬ç”¨å“</a>
            <ul>
              <li>
                <a href="#">å›¾ä¹¦</a>
                <ul>
                  <li><a href="xueshu.html">å­¦æœ¯ä¸“ä¸š</a></li>
                  <li><a href="changxiao.html">ç•…é”€ä¹¦ç±</a></li>
                </ul>
              </li>
              <li>
                <a href="#">æ–‡å…·</a>
                <ul>
                  <li><a href="gangbi.html">é’¢ç¬”</a></li>
                  <li><a href="jisuanqi.html">è®¡ç®—å™¨</a></li>
                  <li><a href="xueyuan.html">å­¦é™¢ç”¨å“</a></li>
                  <li><a href="meishu.html">ç¾æœ¯ç”¨å“</a></li>
                  <li><a href="rijiben.html">æ—¥è®°æœ¬</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="#">è¿åŠ¨å™¨æ</a>
            <ul>
              <li>
                <a href="#">å¥èº«</a>
                <ul>
                  <li><a href="yujia.html">ç‘œä¼½å«</a></li>
                  <li><a href="jianshen.html">å¥èº«æ‰‹å¥—</a></li>
                  <li><a href="fuqin.html">è…¹éƒ¨è®­ç»ƒå™¨</a></li>
                  <li><a href="jianshenqiu.html">å¥èº«çƒ</a></li>
                </ul>
              </li>
              <li>
                <a href="#">å®¤å†…è¿åŠ¨</a>
                <ul>
                  <li><a href="guoji.html">å›½é™…è±¡æ£‹</a></li>
                  <li><a href="feidiao.html">é£é•–</a></li>
                </ul>
              </li>
              <li>
                <a href="#">å›¢é˜Ÿè¿åŠ¨</a>
                <ul>
                  <li><a href="lanqiu.html">ç¯®çƒ</a></li>
                  <li><a href="banqiu.html">æ¿çƒ</a></li>
                  <li><a href="zuqiu.html">è¶³çƒ</a></li>
                  <li><a href="paiqiu.html">æ’çƒ</a></li>
                </ul>
              </li>
              <li>
                <a href="#">çƒæ‹è¿åŠ¨</a>
                <ul>
                  <li><a href="yumaoqiu.html">ç¾½æ¯›çƒ</a></li>
                  <li><a href="biquqiu.html">å£çƒ</a></li>
                  <li><a href="pingpangqiu.html">ä¹’ä¹“çƒ</a></li>
                  <li><a href="wangqiu.html">ç½‘çƒ</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <a href="./contact.html">è”ç³»æˆ‘ä»¬</a>
          </li>
        </ul>
        <span class="left-ribbon"> </span>
        <span class="right-ribbon"> </span>
      </div>
    </div>
    <div class="header_bottom">
      <div class="wrap">
        <div class="slider-text">
          <h2>ç²¾é€‰å•†å“ <br />å“è´¨ä¿è¯</h2>
          <p>ä¸ºæ‚¨æä¾›ä¼˜è´¨çš„è´­ç‰©ä½“éªŒ<br />æ»¡è¶³æ‚¨çš„æ‰€æœ‰éœ€æ±‚</p>
          <a href="index.html#content">ç«‹å³é€‰è´­</a>
        </div>
        <div class="slider-img">
          <img src="images/slider-img.png" alt="" />
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  </ul>
  <span class="left-ribbon"> </span>
  <span class="right-ribbon"> </span>
  </div>
  </div>
  </div>

  <div class="main">
    <div class="wrap">
      <div class="cart-page">
        <div class="cart-header">
          <h1>æˆ‘çš„è´­ç‰©è½¦</h1>
        </div>
        <div class="cart-controls">
          <label class="checkbox-wrapper">
            <input type="checkbox" id="select-all">
            <span class="checkbox-label">å…¨é€‰</span>
          </label>
          <div class="batch-actions">
            <button class="delete-selected" onclick="removeSelectedItems()">åˆ é™¤é€‰ä¸­</button>
            <button class="clear-cart" onclick="clearCart()">æ¸…ç©ºè´­ç‰©è½¦</button>
          </div>
        </div>
        <div id="cart-container">
          <!-- è´­ç‰©è½¦å†…å®¹å°†ç”± JavaScript åŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div class="cart-footer">
          <div class="cart-total">
            <div class="selected-info">
              <span>å·²é€‰æ‹© <span id="selected-count">0</span> ä»¶å•†å“</span>
            </div>
            <div class="total-info">
              <span class="total-label">æ€»è®¡:</span>
              <span class="total-amount">Â¥<span id="total-amount">0</span></span>
            </div>
            <button class="checkout-button" onclick="goToCheckout()">å»ç»“ç®—</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="footer">
    <div class="wrap">
      <div class="copy_right">
        <p>ç‰ˆæƒæ‰€æœ‰ &copy; 2014.å…¬å¸åç§°ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
      </div>
      <div class="footer-nav">
        <ul>
          <li><a href="terms.html">ä½¿ç”¨æ¡æ¬¾</a> : </li>
          <li><a href="privacy.html">éšç§æ”¿ç­–</a> : </li>
          <li><a href="contact.html">è”ç³»æˆ‘ä»¬</a> : </li>
        </ul>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    $(document).ready(function () {
      $().UItoTop({ easingType: 'easeOutQuart' });
    });
  </script>
  <a href="#" id="toTop"></a>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•
      if (!checkLoginStatus()) {
        redirectToLogin();
        return;
      }

      const user = getCurrentUser();
      updateUserDisplay(user.username);
      // åˆå§‹åŒ–è´­ç‰©è½¦æ˜¾ç¤º
      updateCartDisplay();
    });
  </script>

  <!-- æ¨¡æ€æ¡† -->
  <div id="modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">æç¤º</h3>
        <span class="close" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body">
        <p id="modal-message"></p>
      </div>
      <div class="modal-footer">
        <button class="modal-btn cancel" onclick="closeModal()">å–æ¶ˆ</button>
        <button class="modal-btn confirm" id="modal-confirm">ç¡®å®š</button>
      </div>
    </div>
  </div>

  <!-- åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡† -->
  <div id="delete-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">åˆ é™¤ç¡®è®¤</h3>
        <span class="close" onclick="closeDeleteModal()">&times;</span>
      </div>
      <div class="modal-body">
        <p>ç¡®å®šè¦åˆ é™¤è¯¥å•†å“å—ï¼Ÿ</p>
      </div>
      <div class="modal-footer">
        <button class="modal-btn cancel" onclick="closeDeleteModal()">å–æ¶ˆ</button>
        <button class="modal-btn confirm" onclick="confirmDelete()">ç¡®å®š</button>
      </div>
    </div>
  </div>
</body>

</html>